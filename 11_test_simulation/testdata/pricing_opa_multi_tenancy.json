{
  "description": "Multi-Tenancy Limits Test Cases for E6 Tier",
  "test_scenarios": [
    {
      "name": "E6 Multi-Tenancy - Within Limits",
      "input": {
        "model": {
          "tier_id": "E6",
          "base_price_eur": 250000,
          "multi_tenancy_enabled": true,
          "max_tenants": 500,
          "requested_tenants": 350
        },
        "context": {
          "current_tenant_count": 350,
          "tenant_isolation_level": "full_isolation"
        }
      },
      "expected_allow": true,
      "expected_result": {
        "multi_tenancy_eligible": true,
        "tenants_within_limit": true,
        "remaining_capacity": 150
      }
    },
    {
      "name": "E6 Multi-Tenancy - At Maximum Capacity",
      "input": {
        "model": {
          "tier_id": "E6",
          "base_price_eur": 250000,
          "multi_tenancy_enabled": true,
          "max_tenants": 500,
          "requested_tenants": 500
        },
        "context": {
          "current_tenant_count": 500,
          "tenant_isolation_level": "full_isolation"
        }
      },
      "expected_allow": true,
      "expected_result": {
        "multi_tenancy_eligible": true,
        "tenants_within_limit": true,
        "remaining_capacity": 0,
        "warning": "at_maximum_capacity"
      }
    },
    {
      "name": "E6 Multi-Tenancy - Exceeds Limits",
      "input": {
        "model": {
          "tier_id": "E6",
          "base_price_eur": 250000,
          "multi_tenancy_enabled": true,
          "max_tenants": 500,
          "requested_tenants": 650
        },
        "context": {
          "current_tenant_count": 650,
          "tenant_isolation_level": "full_isolation"
        }
      },
      "expected_allow": false,
      "expected_result": {
        "multi_tenancy_eligible": true,
        "tenants_within_limit": false,
        "violation": "max_tenants_exceeded",
        "max_allowed": 500,
        "requested": 650,
        "overage": 150
      }
    },
    {
      "name": "E2 Multi-Tenancy - Not Eligible",
      "input": {
        "model": {
          "tier_id": "E2",
          "base_price_eur": 50000,
          "multi_tenancy_enabled": false,
          "requested_tenants": 10
        },
        "context": {
          "current_tenant_count": 10
        }
      },
      "expected_allow": false,
      "expected_result": {
        "multi_tenancy_eligible": false,
        "violation": "multi_tenancy_not_available_for_tier",
        "minimum_required_tier": "E3"
      }
    },
    {
      "name": "E3 Multi-Tenancy - Basic Support (50 tenants max)",
      "input": {
        "model": {
          "tier_id": "E3",
          "base_price_eur": 150000,
          "multi_tenancy_enabled": true,
          "max_tenants": 50,
          "requested_tenants": 30
        },
        "context": {
          "current_tenant_count": 30,
          "tenant_isolation_level": "namespace_isolation"
        }
      },
      "expected_allow": true,
      "expected_result": {
        "multi_tenancy_eligible": true,
        "tenants_within_limit": true,
        "remaining_capacity": 20,
        "isolation_level": "namespace_isolation"
      }
    }
  ]
}
