{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "$id": "https://ssid.global/schemas/layer8-proof-v5.0.json",
  "title": "Layer 8 Foreign Ecosystem Proof Template",
  "description": "JSON schema for Layer-8 proof submissions from external identity ecosystems to the Global Proof Nexus (Layer 9)",
  "version": "5.0.0",
  "type": "object",

  "required": [
    "ecosystem_id",
    "layer",
    "proof_hash",
    "epoch_id",
    "timestamp",
    "trust_weight",
    "signature"
  ],

  "properties": {
    "ecosystem_id": {
      "type": "string",
      "description": "Unique identifier for the source ecosystem",
      "enum": ["ssid", "eudi", "trustnet", "opencore", "custom"],
      "examples": ["eudi", "trustnet", "opencore"]
    },

    "layer": {
      "type": "integer",
      "description": "Proof layer number (must be 8 for Layer-8 proofs)",
      "const": 8
    },

    "proof_hash": {
      "type": "string",
      "description": "SHA-256 or SHA-512 hash of the Layer-8 proof root (64-char hex for SHA-256, 128-char for SHA-512)",
      "pattern": "^[a-f0-9]{64}([a-f0-9]{64})?$",
      "minLength": 64,
      "maxLength": 128,
      "examples": [
        "a3c5f8d2e9b1047c6d8e2f5a9b3c7d1e4f6a8b2c9d5e7f1a3b5c8d2e4f7a9b1c"
      ]
    },

    "epoch_id": {
      "type": "string",
      "description": "Global epoch identifier (format: YYYY-Qn-NNN or similar)",
      "pattern": "^[A-Z0-9_-]{4,32}$",
      "examples": ["2026-Q3-001", "GLOBAL_Q3_2026", "EPOCH_2026_Q3"]
    },

    "timestamp": {
      "type": "string",
      "description": "ISO 8601 timestamp of proof generation (UTC)",
      "format": "date-time",
      "examples": ["2026-07-15T10:00:00Z", "2026-08-01T14:30:00.000Z"]
    },

    "trust_weight": {
      "type": "number",
      "description": "Trust score for this ecosystem (0-100)",
      "minimum": 0,
      "maximum": 100,
      "examples": [85, 90, 95, 100]
    },

    "signature": {
      "type": "object",
      "description": "Cryptographic signature of the proof",
      "required": ["algorithm", "value"],
      "properties": {
        "algorithm": {
          "type": "string",
          "description": "Signature algorithm used",
          "enum": ["ed25519", "ecdsa", "pgp", "rsa"],
          "examples": ["ed25519", "ecdsa"]
        },
        "value": {
          "type": "string",
          "description": "Base64 or hex-encoded signature",
          "minLength": 64,
          "maxLength": 1024,
          "examples": [
            "3045022100a7b8c9d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b90220c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2"
          ]
        },
        "public_key": {
          "type": "string",
          "description": "Public key for signature verification (optional)",
          "minLength": 32,
          "maxLength": 512
        },
        "key_id": {
          "type": "string",
          "description": "Identifier for the signing key (optional)",
          "maxLength": 128
        }
      }
    },

    "proof_anchor": {
      "type": "object",
      "description": "Additional proof metadata and anchoring information",
      "properties": {
        "merkle_root": {
          "type": "string",
          "description": "Merkle root of the federated proof tree",
          "pattern": "^[a-f0-9]{64}([a-f0-9]{64})?$",
          "examples": [
            "b4d6a8c2e5f1937d8e0f2a6b9c3d7e1f5a7b9c2d6e8f0a2b4c7d9e1f3a6b8c2d5"
          ]
        },
        "federation_count": {
          "type": "integer",
          "description": "Number of federations included in this proof",
          "minimum": 1,
          "examples": [5, 10, 15]
        },
        "node_count": {
          "type": "integer",
          "description": "Total number of nodes participating",
          "minimum": 1,
          "examples": [100, 200, 500]
        },
        "consensus_ratio": {
          "type": "number",
          "description": "Consensus ratio achieved (0.0-1.0)",
          "minimum": 0,
          "maximum": 1,
          "examples": [0.85, 0.90, 0.95]
        },
        "on_chain_tx": {
          "type": "string",
          "description": "On-chain transaction hash (if applicable)",
          "pattern": "^(0x)?[a-f0-9]{64}$",
          "examples": [
            "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
          ]
        },
        "ipfs_cid": {
          "type": "string",
          "description": "IPFS Content Identifier (if applicable)",
          "pattern": "^Qm[a-zA-Z0-9]{44}$",
          "examples": ["QmYwAPJzv5CZsnA625s3Xf2nemtYgPpHdWEz79ojWnPbdG"]
        }
      }
    },

    "metadata": {
      "type": "object",
      "description": "Additional metadata about the proof",
      "properties": {
        "version": {
          "type": "string",
          "description": "Proof format version",
          "examples": ["5.0.0", "1.0.0"]
        },
        "generator": {
          "type": "string",
          "description": "Software/system that generated this proof",
          "examples": ["eudi-proof-engine-v2.1", "trustnet-aggregator-v3.0"]
        },
        "contact": {
          "type": "string",
          "description": "Contact information for this ecosystem",
          "format": "email",
          "examples": ["info@eudi.eu", "admin@trustnet.org"]
        },
        "documentation_url": {
          "type": "string",
          "description": "URL to ecosystem documentation",
          "format": "uri",
          "examples": ["https://docs.eudi.eu/proofs", "https://trustnet.org/specs"]
        }
      }
    },

    "compliance": {
      "type": "object",
      "description": "Compliance markers for regulatory frameworks",
      "properties": {
        "gdpr_compliant": {
          "type": "boolean",
          "description": "GDPR compliance flag",
          "default": true
        },
        "eidas_compliant": {
          "type": "boolean",
          "description": "eIDAS compliance flag",
          "default": false
        },
        "data_residency": {
          "type": "string",
          "description": "Data residency/jurisdiction",
          "examples": ["EU", "US", "GLOBAL"]
        },
        "retention_policy": {
          "type": "string",
          "description": "Data retention policy",
          "examples": ["365 days", "90 days", "indefinite"]
        }
      }
    }
  },

  "examples": [
    {
      "ecosystem_id": "eudi",
      "layer": 8,
      "proof_hash": "a3c5f8d2e9b1047c6d8e2f5a9b3c7d1e4f6a8b2c9d5e7f1a3b5c8d2e4f7a9b1c",
      "epoch_id": "2026-Q3-001",
      "timestamp": "2026-07-15T10:00:00Z",
      "trust_weight": 95,
      "signature": {
        "algorithm": "ed25519",
        "value": "3045022100a7b8c9d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b90220c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2",
        "key_id": "eudi-signing-key-2026-q3"
      },
      "proof_anchor": {
        "merkle_root": "b4d6a8c2e5f1937d8e0f2a6b9c3d7e1f5a7b9c2d6e8f0a2b4c7d9e1f3a6b8c2d5",
        "federation_count": 12,
        "node_count": 240,
        "consensus_ratio": 0.92,
        "on_chain_tx": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
      },
      "metadata": {
        "version": "5.0.0",
        "generator": "eudi-proof-engine-v2.1",
        "contact": "info@eudi.eu",
        "documentation_url": "https://docs.eudi.eu/layer8-proofs"
      },
      "compliance": {
        "gdpr_compliant": true,
        "eidas_compliant": true,
        "data_residency": "EU",
        "retention_policy": "365 days"
      }
    },
    {
      "ecosystem_id": "trustnet",
      "layer": 8,
      "proof_hash": "c5d7e9f1a3b5c7d9e1f3a5b7c9d1e3f5a7b9c1d3e5f7a9b1c3d5e7f9a1b3c5d7",
      "epoch_id": "GLOBAL_Q3_2026",
      "timestamp": "2026-07-15T10:05:00Z",
      "trust_weight": 90,
      "signature": {
        "algorithm": "ecdsa",
        "value": "304502210098a7b6c5d4e3f2a1b0c9d8e7f6a5b4c3d2e1f0a9b8c7d6e5f4a3b2c1d0e9f8a70220f1e2d3c4b5a6978869504132a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0",
        "public_key": "04a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2"
      },
      "proof_anchor": {
        "merkle_root": "d6e8f0a2b4c6d8e0f2a4b6c8d0e2f4a6b8c0d2e4f6a8b0c2d4e6f8a0b2c4d6e8",
        "federation_count": 15,
        "node_count": 450,
        "consensus_ratio": 0.88
      },
      "metadata": {
        "version": "5.0.0",
        "generator": "trustnet-aggregator-v3.0",
        "contact": "admin@trustnet.org"
      },
      "compliance": {
        "gdpr_compliant": true,
        "eidas_compliant": false,
        "data_residency": "GLOBAL",
        "retention_policy": "365 days"
      }
    },
    {
      "ecosystem_id": "opencore",
      "layer": 8,
      "proof_hash": "e7f9a1b3c5d7e9f1a3b5c7d9e1f3a5b7c9d1e3f5a7b9c1d3e5f7a9b1c3d5e7f9",
      "epoch_id": "2026-Q3-001",
      "timestamp": "2026-07-15T10:10:00.000Z",
      "trust_weight": 85,
      "signature": {
        "algorithm": "ed25519",
        "value": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2",
        "key_id": "opencore-master-key-01"
      },
      "proof_anchor": {
        "merkle_root": "f8a0b2c4d6e8f0a2b4c6d8e0f2a4b6c8d0e2f4a6b8c0d2e4f6a8b0c2d4e6f8a0",
        "federation_count": 8,
        "node_count": 160,
        "consensus_ratio": 0.90,
        "ipfs_cid": "QmYwAPJzv5CZsnA625s3Xf2nemtYgPpHdWEz79ojWnPbdG"
      },
      "metadata": {
        "version": "5.0.0",
        "generator": "opencore-proof-v1.5",
        "contact": "core@opencore.io",
        "documentation_url": "https://opencore.io/docs/layer8"
      },
      "compliance": {
        "gdpr_compliant": true,
        "eidas_compliant": false,
        "data_residency": "US",
        "retention_policy": "365 days"
      }
    }
  ]
}
